<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>E-Ticket</title>
    <style>
        .ticket-container { background: url('https://www.transparenttextures.com/patterns/carpet.png'); padding: 20px; border-radius: 10px; max-width: 700px; margin: auto; font-family: 'Segoe UI', sans-serif; }
        .ticket { background-color: #fff; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); padding: 20px; }
        .ticket h2 { text-align: center; color: #2c3e50; margin-bottom: 20px; font-weight: bold; }
        .ticket-table th, .ticket-table td { padding: 8px 12px; }
        .download-btn { text-align: center; margin-top: 20px; }
    </style>
</head>
<body>
    <div class='ticket-container'>
        <div class='ticket' id='ticket-content'>
            <h2>E-Ticket</h2>
            <h5 class='text-center mb-3'>PNR: <span class='text-primary'>${txn.transId}</span></h5>
            <table class='table table-bordered ticket-table'>
                <tbody>
                    <tr><th>Train Name</th><td>${trainName}</td></tr>
                    <tr><th>Train No</th><td>${txn.tr_no}</td></tr>
                    <tr><th>From</th><td>${txn.from_stn}</td></tr>
                    <tr><th>To</th><td>${txn.to_stn}</td></tr>
                    <tr><th>Date of Journey</th><td>${txn.date}</td></tr>
                    <tr><th>Time</th><td>11:23</td></tr>
                    <tr><th>Passengers</th><td>${txn.seats}</td></tr>
                    <tr><th>Class</th><td>${seatClass}</td></tr>
                    <tr><th>Amount Paid</th><td>&#8377; ${txn.amount}</td></tr>
                </tbody>
            </table>
        </div>
        <div class='download-btn'>
            <button class='btn btn-primary' onclick='downloadTicket()'>Download Ticket</button>
        </div>
    </div>

    <script>
    function downloadTicket() {
        const ticket = document.getElementById('ticket-content').outerHTML;
        const blob = new Blob([ticket], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'ticket.html';
        a.click();
        URL.revokeObjectURL(url);
    }
    </script>
</body>
</html>